(()=>{let e,t=!1,n=!1;async function i(){await gapi.client.init({apiKey:"AIzaSyA9_NUnPURqgh8GtAoox3bD9Xim6qUlO9k",discoveryDocs:["https://www.googleapis.com/discovery/v1/apis/calendar/v3/rest"]}),t=!0,o()}function o(){t&&n&&(document.getElementById("authorize_button").style.visibility="visible")}async function c(){let e;try{const t={calendarId:"primary",timeMin:(new Date).toISOString(),showDeleted:!1,singleEvents:!0,maxResults:10,orderBy:"startTime"};e=await gapi.client.calendar.events.list(t)}catch(e){return void(document.getElementById("content").innerText=e.message)}const t=e.result.items;if(!t||0==t.length)return void(document.getElementById("content").innerText="No events found.");const n=t.reduce(((e,t)=>`${e}${t.summary} (${t.start.dateTime||t.start.date})\n`),"Events:\n");document.getElementById("content").innerText=n}document.addEventListener("DOMContentLoaded",(()=>{document.getElementById("authorize_button").style.visibility="hidden",document.getElementById("signout_button").style.visibility="hidden"})),window.handleAuthClick=function(){e.callback=async e=>{if(void 0!==e.error)throw e;document.getElementById("signout_button").style.visibility="visible",document.getElementById("authorize_button").innerText="Refresh",await c()},null===gapi.client.getToken()?e.requestAccessToken({prompt:"consent"}):e.requestAccessToken({prompt:""})},window.handleSignoutClick=function(){const e=gapi.client.getToken();null!==e&&(google.accounts.oauth2.revoke(e.access_token),gapi.client.setToken(""),document.getElementById("content").innerText="",document.getElementById("authorize_button").innerText="Authorize",document.getElementById("signout_button").style.visibility="hidden")},window.listUpcomingEvents=c,window._gapiLoaded=function(){gapi.load("client",i)},window._gisLoaded=function(){e=google.accounts.oauth2.initTokenClient({client_id:"88942946394-v2e4pbcm1a4lkn8upsher35nsjcknmp1.apps.googleusercontent.com",scope:"https://www.googleapis.com/auth/calendar.readonly",callback:""}),n=!0,o()}})();